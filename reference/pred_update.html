<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function takes an existing (previously developed) prediction model and
applies various model updating methods to tailor/adapt it to a new dataset.
Various levels of updating are possible, ranging from model re-calibration to
model refit."><title>Perform Model Updating on an Existing Prediction Model — pred_update • predRupdate</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Perform Model Updating on an Existing Prediction Model — pred_update"><meta property="og:description" content="This function takes an existing (previously developed) prediction model and
applies various model updating methods to tailor/adapt it to a new dataset.
Various levels of updating are possible, ranging from model re-calibration to
model refit."><meta property="og:image" content="https://glenmartin31.github.io/predRupdate/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">predRupdate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/predRupdate.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/predRupdate_splineIllustration.html">Example of Validating a Model that Includes Spline Terms</a>
    <a class="dropdown-item" href="../articles/predRupdate_technical.html">Technical Background to predRupdate</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/GlenMartin31/predRupdate/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Perform Model Updating on an Existing Prediction Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/GlenMartin31/predRupdate/blob/HEAD/R/pred_update.R" class="external-link"><code>R/pred_update.R</code></a></small>
      <div class="d-none name"><code>pred_update.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes an existing (previously developed) prediction model and
applies various model updating methods to tailor/adapt it to a new dataset.
Various levels of updating are possible, ranging from model re-calibration to
model refit.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pred_update</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  update_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"intercept_update"</span>, <span class="st">"recalibration"</span>, <span class="st">"refit"</span><span class="op">)</span>,</span>
<span>  <span class="va">new_data</span>,</span>
<span>  binary_outcome <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  survival_time <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  event_indicator <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>an object of class "<code>predinfo</code>" produced by calling
<code><a href="pred_input_info.html">pred_input_info</a></code> containing information on exactly one
existing prediction model.</p></dd>


<dt>update_type</dt>
<dd><p>character variable specifying the level of updating that
is required.</p></dd>


<dt>new_data</dt>
<dd><p>data.frame upon which the prediction models should be
updated.</p></dd>


<dt>binary_outcome</dt>
<dd><p>Character variable giving the name of the column in
<code>new_data</code> that represents the observed binary outcomes (should be
coded 0 and 1 for non-event and event, respectively). Only relevant for
<code>model_type</code>="logistic"; leave as <code>NULL</code> otherwise. Leave as
<code>NULL</code> if <code>new_data</code> does not contain any outcomes.</p></dd>


<dt>survival_time</dt>
<dd><p>Character variable giving the name of the column in
<code>new_data</code> that represents the observed survival times. Only relevant
for <code>x$model_type</code>="survival"; leave as <code>NULL</code> otherwise.</p></dd>


<dt>event_indicator</dt>
<dd><p>Character variable giving the name of the column in
<code>new_data</code> that represents the observed survival indicator (1 for
event, 0 for censoring). Only relevant for <code>x$model_type</code>="survival";
leave as <code>NULL</code> otherwise.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A object of class "<code>predUpdate</code>". This is the same as that
detailed in <code><a href="pred_input_info.html">pred_input_info</a></code>, with the added element
containing the estimates of the model updating and the update type.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function takes a single existing (previously estimated)
prediction model, and apply various model discrete model updating methods
(see Su et al. 2018) to tailor the model to a new dataset.</p>
<p>The type of updating method is selected with the <code>update_type</code>
parameter, with options: "intercept_update", "recalibration" and "refit".
"intercept_update" corrects the overall calibration-in-the-large of the
model, through altering the model intercept (or baseline hazard) to suit
the new dataset. This is achieved by fitting a logistic model (if the
existing model is of type logistic) or time-to-event model (if the existing
model if of type survival) to the new dataset, with the linear predictor as
the only covariate, with the coefficient fixed at unity (i.e. as an
offset). "recalibration" corrects the calibration-in-the-large and any
under/over-fitting, by fitting a logistic model (if the existing model is
of type logistic) or time-to-event model (if the existing model if of type
survival) to the new dataset, with the linear predictor as the only
covariate. Finally, "refit" takes the original model structure and
re-estimates all coefficients; this has the effect as re-developing the
original model in the new data.</p>
<p><code>new_data</code> should be a data.frame, where each row should be an
observation (e.g. patient) and each variable/column should be a predictor
variable. The predictor variables need to include (as a minimum) all of the
predictor variables that are included in the existing prediction model
(i.e., each of the variable names supplied to
<code><a href="pred_input_info.html">pred_input_info</a></code>, through the <code>model_info</code> parameter,
must match the name of a variables in <code>new_data</code>).</p>
<p>Any factor variables within <code>new_data</code> must be converted to dummy
(0/1) variables before calling this function. <code><a href="dummy_vars.html">dummy_vars</a></code> can
help with this. See <code><a href="pred_predict.html">pred_predict</a></code> for examples.</p>
<p><code>binary_outcome</code>, <code>survival_time</code> and <code>event_indicator</code> are
used to specify the outcome variable(s) within <code>new_data</code> (use
<code>binary_outcome</code> if <code>x$model_type</code> = "logistic", or use
<code>survival_time</code> and <code>event_indicator</code> if <code>x$model_type</code> =
"survival").</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Su TL, Jaki T, Hickey GL, Buchan I, Sperrin M. A review of
statistical updating methods for clinical prediction models. <em>Stat Methods
Med Res</em>. 2018 Jan;27(1):185-197. doi: 10.1177/0962280215626466.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="pred_input_info.html">pred_input_info</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#Example 1 - update time-to-event model by updating the baseline hazard in new dataset</span></span></span>
<span class="r-in"><span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="pred_input_info.html">pred_input_info</a></span><span class="op">(</span>model_type <span class="op">=</span> <span class="st">"survival"</span>,</span></span>
<span class="r-in"><span>                          model_info <span class="op">=</span> <span class="va">SYNPM</span><span class="op">$</span><span class="va">Existing_TTE_models</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>,</span></span>
<span class="r-in"><span>                          cum_hazard <span class="op">=</span> <span class="va">SYNPM</span><span class="op">$</span><span class="va">TTE_mod1_baseline</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">recalibrated_model1</span> <span class="op">&lt;-</span> <span class="fu">pred_update</span><span class="op">(</span>x <span class="op">=</span> <span class="va">model1</span>,</span></span>
<span class="r-in"><span>                                   update_type <span class="op">=</span> <span class="st">"intercept_update"</span>,</span></span>
<span class="r-in"><span>                                   new_data <span class="op">=</span> <span class="va">SYNPM</span><span class="op">$</span><span class="va">ValidationData</span>,</span></span>
<span class="r-in"><span>                                   survival_time <span class="op">=</span> <span class="st">"ETime"</span>,</span></span>
<span class="r-in"><span>                                   event_indicator <span class="op">=</span> <span class="st">"Status"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">recalibrated_model1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Original model was updated with type intercept_update</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The new model baseline cumulative hazard is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           time       hazard</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2.021278e-06 1.498399e-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1.630775e-05 2.996905e-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 3.600450e-05 4.495490e-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 4.006704e-05 5.994284e-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 6.484743e-05 7.493149e-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1.216613e-04 8.992081e-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Updated Model Coefficients </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================= </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           Age      SexM Smoking_Status  Diabetes Creatinine</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.007014587 0.2249174      0.6852695 0.4245074   0.587486</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model Functional Form </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ================================= </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Age + SexM + Smoking_Status + Diabetes + Creatinine</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Glen P. Martin, David Jenkins, Matthew Sperrin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

